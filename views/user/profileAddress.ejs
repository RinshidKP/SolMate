<%- include("./layout/header.ejs") %>


  <div class="row m-0 container-fluid">
    <div class="m-5 col-4">
      <div class="col-6 d-flex justify-content-center">
        <div class="">
          <div style="height: 8rem; width: 8rem; border: 0.05rem solid rgb(174, 171, 171);" class="rounded-circle d-flex align-items-center justify-content-center">
            <i class="fa fa-user" style="font-size: 2.5rem;"></i>
          </div>
        </div>
      </div>
      <div class="col-6 d-flex flex-column align-items-center">
        <div class="">
          <div class="row"><%= name %></div>
          <div style="font-size: 0.75rem" class="row">
            <%= user.created.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %>
          </div>
        </div>
      </div>
      <div class="col-6 d-flex flex-column">
        <div class="rounded-3 p-3" style="border: 0.05rem solid rgb(174, 171, 171); min-height: 2rem;">
          <a href="/user/profile" class="rounded-3 p-2 nav-link text-dark">Profile</a>
        </div>
        <div class="rounded-3 p-2" style="border: 0.05rem solid rgb(174, 171, 171); min-height: 2rem;">
          <a href="/user/order" class="nav-link text-dark rounded-3 p-2">Orders</a>
        </div>
        <div class="rounded-3 p-2" style="border: 0.05rem solid rgb(174, 171, 171); background-color: #15140e; min-height: 2rem;">
        <a href="/user/profileAddress" class="nav-link text-light rounded-3 p-2">Address</a>
      </div>
        <div class="rounded-3 p-2" style="border: 0.05rem solid rgb(174, 171, 171); min-height: 2rem;">
          <a href="" class="nav-link text-dark rounded-3 p-2">Wishlist</a>
        </div>
        <div class="rounded-3 p-2" style="border: 0.05rem solid rgb(174, 171, 171); min-height: 2rem;">
          <a href="/cart" class="nav-link text-dark rounded-3 p-2">Cart</a>
        </div>
      </div>
    </div>

    <div class="grid-container col-6">
      <div class="row" >
      <div class="grid-item col-6">
        <% if (contact) { %>
        <!-- Contact Address Card -->
        <div class="card mt-4">
          <!-- Card Header -->
          <div class="card-header bg-light py-4">
            <h4 class="mb-0">Contact Address</h4>
            <p class="mb-0">We can contact you here</p>
          </div>
          <!-- Card Body -->
          <div class="card-body">
            <!-- Address Form -->
            <form>
              <!-- Building Name -->
              <div class="form-group">
                <label for="building">Building Name</label>
                <input type="text" class="form-control" id="building" name="building" value="<%=contact.buildingName%>" readonly />
              </div>
              <!-- Street -->
              <div class="form-group">
                <label for="state">Street</label>
                <input type="text" class="form-control" id="state" name="street" value="<%=contact.street%>" readonly />
              </div>
              <!-- City, State, Zip -->
              <div class="form-row">
                <div class="form-group col-md-5">
                  <label for="inputCity">City</label>
                  <input type="text" class="form-control" id="inputCity" name="city" value="<%=contact.city%>" readonly />
                </div>
                <div class="form-group col-md-4">
                  <label for="inputState">State</label>
                  <input type="text" class="form-control" id="inputState" name="state" value="<%=contact.state%>" readonly />
                </div>
                <div class="form-group col-md-3">
                  <label for="inputZip">Zip</label>
                  <input type="text" class="form-control" id="inputZip" name="zip" value="<%=contact.pincode%>" readonly />
                </div>
              </div>
              <!-- Country -->
              <div class="form-group">
                <label for="country">Country</label>
                <input type="text" class="form-control" id="country" name="country" value="<%=contact.country%>" readonly />
              </div>
              <!-- Phone Number -->
              <div class="form-group">
                <label for="country">Phone Number</label>
                <input type="text" class="form-control" id="phone" name="phone" pattern="[0-9]" value="<%=contact.phonenumber%>" readonly />
              </div>
            </form>
            <!-- Edit Address Button -->
            <div class="d-flex justify-content-between align-items-center pt-2">
              <a href="/user/profileAddress/edit?type=contact&id=<%=contact._id%>" class="btn btn-dark">Edit Address</a>
            </div>
          </div>
        </div>
        <% } else { %>
        <!-- Add Contact Address Card -->
        <div class="card mt-5 ml-5">
          <div class="card-header bg-light py-4">
            <h4 class="mb-0 fs-3">Contact Address</h4>
            <p class="mb-0 fs-5">We can contact you here</p>
          </div>
          <div class="card-body">
            <a href="/user/profileAddress/add?type=contact" class="btn btn-dark fs-4">Add new Address</a>
          </div>
        </div>
        <% } %>
      </div>
      <div class="grid-item col-6 mb-4 ">
        <% if (main) { %>
        <!-- Main Shipping Address Card -->
        <div class="card mt-4 ">
          <!-- Card Header -->
          <div class="card-header bg-light py-4">
            <h4 class="mb-0">Shipping Address</h4>
            <p class="mb-0">Main</p>
          </div>
          <!-- Card Body -->
          <div class="card-body">
            <!-- Address Form -->
            <form>
              <!-- Building Name -->
              <div class="form-group">
                <label for="building">Building Name</label>
                <input type="text" class="form-control" id="building" name="building" value="<%=main.buildingName%>" readonly />
              </div>
              <!-- Street -->
              <div class="form-group">
                <label for="state">Street</label>
                <input type="text" class="form-control" id="state" name="street" value="<%=main.street%>" readonly />
              </div>
              <!-- City, State, Zip -->
              <div class="form-row">
                <div class="form-group col-md-5">
                  <label for="inputCity">City</label>
                  <input type="text" class="form-control" id="inputCity" name="city" value="<%=main.city%>" readonly />
                </div>
                <div class="form-group col-md-4">
                  <label for="inputState">State</label>
                  <input type="text" class="form-control" id="inputState" name="state" value="<%=main.state%>" readonly />
                </div>
                <div class="form-group col-md-3">
                  <label for="inputZip">Zip</label>
                  <input type="text" class="form-control" id="inputZip" name="zip" value="<%=main.pincode%>" readonly />
                </div>
              </div>
              <!-- Country -->
              <div class="form-group">
                <label for="country">Country</label>
                <input type="text" class="form-control" id="country" name="country" value="<%=main.country%>" readonly />
              </div>
              <!-- Phone Number -->
              <div class="form-group">
                <label for="country">Phone Number</label>
                <input type="text" class="form-control" id="phone" name="phone" pattern="[0-9]" value="<%=main.phonenumber%>" readonly />
              </div>
            </form>
            <!-- Edit Address Button -->
            <div class="d-flex justify-content-between align-items-center pt-2">
              <a href="/user/profileAddress/edit?type=main&id=<%=main._id %>" class="btn btn-dark">Edit Address</a>
            </div>
          </div>
        </div>
        
      </div>
      <% if (secondary) { %>
        <!-- Secondary Shipping Address Cards -->
        <div class="row">
          <% for (s of secondary) { %>
          <div class="col-6">
            <div class="card mt-4 mb-4">
              <div class="card-header bg-light py-4">
                <h4 class="mb-0">Shipping Address</h4>
                <p class="mb-0">Secondary</p>
              </div>
              <div class="card-body py-5"> <!-- Add p-0 class for no padding -->
                <form>
                  <div class="form-group">
                    <label for="building">Building Name</label>
                    <input type="text" class="form-control" id="building" name="building" value="<%=s.buildingName%>" readonly>
                  </div>
                  <div class="form-group">
                    <label for="state">Street</label>
                    <input type="text" class="form-control" id="state" name="street" value="<%=s.street%>" readonly>
                  </div>
                  <div class="form-group">
                    <label for="inputCity">City</label>
                    <input type="text" class="form-control" id="inputCity" name="city" value="<%=s.city%>" readonly>
                  </div>
                  <div class="form-group">
                    <label for="inputState">State</label>
                    <input type="text" class="form-control" id="inputState" name="state" value="<%=s.state%>" readonly>
                  </div>
                  <div class="form-group">
                    <label for="inputZip">Zip</label>
                    <input type="text" class="form-control" id="inputZip" name="zip" value="<%=s.pincode%>" readonly>
                  </div>
                  <div class="form-group">
                    <label for="country">Country</label>
                    <input type="text" class="form-control" id="country" name="country" value="<%=s.country%>" readonly>
                  </div>
                  <div class="form-group">
                    <label for="country">Phone Number</label>
                    <input type="text" class="form-control" id="phone" name="phone" pattern="[0-9]" value="<%=s.phonenumber%>" readonly>
                  </div>
                </form>
                <div class="d-flex justify-content-between align-items-center ">
                  <a href="/user/profileAddress/edit?type=secondary&id=<%=s._id%>" class="btn btn-dark">Edit Address</a>
                  <a onclick="deleteAddress('<%=s._id%>')" class="btn btn-dark">Delete</a>
                </div>
              </div>
            </div>
          </div>
          <% } %>
        </div>
        <% } %>
        <div class="card mt-4">
          <div class="card-header bg-light py-4">
            <h4 class="mb-0">Shipping Address</h4>
            <p class="mb-0">Secondary</p>
          </div>
          <div class="card-body">
            <a href="/user/profileAddress/add?type=secondary" class="btn btn-dark">Add new Address</a>
          </div>
        </div>
        

      
        <% } else { %>
        <div class="card mt-4">
          <div class="card-header bg-light py-4">
            <h4 class="mb-0">Shipping Address</h4>
            <p class="mb-0">Main</p>
          </div>
          <div class="card-body">
            <a href="/user/profileAddress/add?type=main" class="btn btn-dark">Add new Address</a>
          </div>
        </div>
        <% } %>
    </div>
  </div>
  </div>
</div>

<!-- axios cdn -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js"></script>

<!-- sweet alert cdn -->
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    function deleteAddress(id) {
      Swal.fire({
        icon: "warning",
        title: "Are you sure?",
        text: "Delete Address?",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "remove",
      }).then((result) => {
        if (result.isConfirmed) {
          axios.delete(`/address/delete?id=${id}`).then((result) => {
            Swal.fire("removed!", "Address has been deleted.", "success").then((response) => {
              location.reload();
            })
          })
          
        }
      });
    }
  </script>
<%- include("./layout/footer.ejs") %>